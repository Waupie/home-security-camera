<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Pi Camera Live</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/main.css') }}">
  </head>
  <body>
    <div class="container">
      <div style="text-align:right;margin-bottom:12px;">
        <a href="/logout" style="color:#0088ff;text-decoration:none;">Logout</a>
      </div>
      <h1>Saltar√∂ Security Camera</h1>
      
      <!-- Responsive video container -->
      <div class="video-container">
        <!-- Primary MJPEG display: browsers that support MJPEG in <img> will show the live stream here -->
        <img id="mjpeg" src="/stream" alt="Live stream">

        <!-- Fallback: some clients handle MJPEG better when loaded in an <iframe> or <object>. -->
        <iframe id="mjpeg_iframe" src="/stream" style="display:none;" title="MJPEG fallback"></iframe>
      </div>

      <!-- status element removed: stream status displayed via stream indicator or console -->

      <div style="margin-top:16px;">
        <button id="recordBtn">Record 10s</button>
        <span id="recordStatus" style="margin-left:12px;color:#f55"></span>
      </div>

      <div id="recordingLink" style="margin-top:12px;"></div>

      <!-- Video List Section -->
      <div style="margin-top:40px;border-top:2px solid #333;padding-top:20px;">
        <h2>Recorded Videos</h2>
        <div id="videoList" style="text-align:left;max-height:400px;overflow-y:auto;">
          <p style="color:#888;">Loading videos...</p>
        </div>
      </div>

      <script src="{{ url_for('static', filename='js/app.js') }}"></script>
      <!-- Modal for inline video playback -->
      <div id="videoModal" style="display:none;">
        <div id="videoModalContent"></div>
      </div>
    </div>
  </body>
</html>